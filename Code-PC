import socket

# Create a TCP socket using IPv4 (AF_INET) and TCP protocol (SOCK_STREAM)
server = socket.socket(socket.AF_INET, socket.SOCK_STREAM)


# Bind the server to a specific IP address and port.
# This tells the OS which interface and port the server will listen on.
server.bind(("192.168.0.100", 12345))


# Put the server into listening mode.
# The argument (1) defines the maximum number of queued incoming connections.
server.listen(1)
print("waiting for connection")


# accept() blocks until a client connects.
# client_socket is the dedicated socket for communication with that client.
# address contains the client's IP address and port.
client_socket, address = server.accept()
print(f"Connected to {address}")


# Main loop: receive and handle data from the connected client.
while True:
    # Receive up to 1024 bytes from the client.
    data = client_socket.recv(1024)
    # If no data is received, the client closed the connection â†’ exit the loop.
    if not data:
        break
    # Print the received data to the console.
    print("Received:", data)


# Close the connection with the client socket.
client_socket.close()
